The code computes and compares success rates using huge floating-point values (A*10**100/(A+B)), which can lose precision and therefore produce incorrect ordering.
