The loop iterates over S[:-1] (all but the last move), so the final move (and its health decrement/collision/healing) is never simulated.
