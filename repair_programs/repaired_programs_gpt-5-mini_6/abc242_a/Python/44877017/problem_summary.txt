The code incorrectly sets res = 100.0 when x <= a (treating guaranteed probability as 100 instead of 1), so it outputs 100.000... instead of 1.000....
