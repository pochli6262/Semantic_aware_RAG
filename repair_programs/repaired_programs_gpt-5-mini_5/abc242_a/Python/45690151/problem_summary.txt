The code computes the random-selection probability using (B−A+1) in the denominator instead of (B−A), causing an off-by-one error for ranks between A+1 and B.
