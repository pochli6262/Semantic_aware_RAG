The likely bug is that the line intended to remove the item from the dictionary (to prevent it from being consumed again) uses `==` instead of `=`.
