The likely bug is that the program incorrectly iterates over the moves using `S[:-1]`, which causes it to miss the last move and potentially leads to an incorrect health check and output.
