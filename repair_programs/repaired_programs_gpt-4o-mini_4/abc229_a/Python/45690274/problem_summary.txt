The likely bug is that the program incorrectly assumes that having three or more black squares guarantees connectivity without checking the arrangement of the black squares.
