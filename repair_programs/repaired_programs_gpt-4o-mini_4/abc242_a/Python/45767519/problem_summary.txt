The likely bug is that the program incorrectly determines the range of participants eligible for selection and thus miscalculates the probability when Iroha-chan's rank X falls between A+1 and B.
