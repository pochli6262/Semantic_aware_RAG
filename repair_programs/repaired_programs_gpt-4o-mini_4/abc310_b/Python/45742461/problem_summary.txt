The likely bug is that the condition checking the superiority of products incorrectly uses `s[j][1]` instead of `s[j][0]` when comparing prices.
