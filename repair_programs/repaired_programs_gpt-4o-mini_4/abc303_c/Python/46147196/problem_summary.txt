The likely bug is that the program incorrectly processes the last move in the string S by iterating only up to S[:-1], which can lead to health loss without checking the final position.
