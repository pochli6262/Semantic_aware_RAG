The likely bug is that the condition for participants ranked between (A+1)-th and B-th is incorrectly checking if X is less than or equal to C instead of checking if X is between A and B.
