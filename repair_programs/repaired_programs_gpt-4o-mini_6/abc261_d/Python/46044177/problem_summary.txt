The likely bug is that the program incorrectly calculates the streak bonus by adding the bonus value for each counter update without properly resetting the calculation when a coin toss results in tails.
