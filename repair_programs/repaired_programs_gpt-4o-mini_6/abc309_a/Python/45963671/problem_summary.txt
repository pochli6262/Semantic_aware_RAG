The likely bug is that the program incorrectly evaluates adjacency by relying solely on the difference between A and B, rather than checking their actual positions on the board.
